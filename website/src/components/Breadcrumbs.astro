---
const { pathname } = Astro.url;

// Split pathname and remove empty strings
const segments = pathname.split('/').filter(Boolean);

// Define labels for Hebrew translations
const labels: Record<string, string> = {
  'about': 'אודות',
  'contact': 'צור קשר',
  'products': 'מוצרים',
  'beef': 'בקר',
  'lamb': 'כבש',
  'chicken': 'עוף',
  'homemade': 'תוצרת בית',
  'accessibility': 'נגישות',
  'recipes': 'מתכונים',
  'chuck-roast': 'צלי כתף בבישול איטי',
  'entrecote-steak': 'סטייק אנטריקוט במחבת',
  'festive-asado': 'תבשיל אסאדו חגיגי',
  'picanha-chimichurri': 'פיקאניה בצ׳ימיצ׳ורי',
  'arayes': 'עראייס'
};

const breadcrumbs = segments.map((segment, index) => {
  const cleanSegment = segment.replace('.html', '');
  const url = `/${segments.slice(0, index + 1).join('/')}`;
  return {
    label: labels[cleanSegment] || cleanSegment,
    url,
    isFirst: index === 0,
    isLast: index === segments.length - 1
  };
});
---

{segments.length > 0 && (
  <nav aria-label="Breadcrumb" class="container mx-auto px-4 py-4 text-sm">
    <ol class="flex items-center space-x-2 space-x-reverse text-gray-400">
      <li>
        <a href="/" class="hover:text-primary transition-colors">דף הבית</a>
      </li>
      {breadcrumbs.map((crumb) => (
        <li class="flex items-center">
          <svg class="w-4 h-4 mx-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
          </svg>
          {crumb.isLast ? (
            <span class="text-primary font-medium" aria-current="page">{crumb.label}</span>
          ) : (
            <a href={crumb.url} class="hover:text-primary transition-colors">{crumb.label}</a>
          )}
        </li>
      ))}
    </ol>
  </nav>
)}
